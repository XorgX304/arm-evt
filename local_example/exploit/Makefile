CC=gcc
AS=as
OCOPY=objcopy
APP=./getroot

default: all

all: shellcode getroot

elevate:
	$(AS) elevate.asm -o elevate.o

shellcode:
	$(AS) backdoor.asm -o backdoor.o
	$(OCOPY) -O binary backdoor.o sc.bin

getroot: elevate
	$(CC) getroot.c elevate.o -o ${APP}

clean:
	rm -rf *.o ${APP}
